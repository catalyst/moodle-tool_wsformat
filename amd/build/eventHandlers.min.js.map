{"version":3,"file":"eventHandlers.min.js","sources":["../src/eventHandlers.js"],"sourcesContent":["import * as Toast from 'core/toast';\n\n// Select needed elements for event handlers.\nconst detailContainerElement = document.querySelector('#ws-panel');\nconst detailPlaceholderText = document.querySelector('#placeholder-text');\nconst detailTitleElement = document.getElementById('ws-title');\nconst detailDescriptionElement = document.getElementById('ws-description');\nconst detailRequestElement = document.getElementById('ws-curl');\nconst exportButtonElement = document.getElementById('export-button-id');\n\nexport const exportSelectChangeHandler = (event) => {\n    const url = exportButtonElement.href;\n    let urlObj = new URL(url);\n\n    const exportType = event.target.value;\n    if (exportType === 'curl') {\n        urlObj.searchParams.set('export-type', 'curl');\n    } else {\n        urlObj.searchParams.set('export-type', 'postman');\n    }\n\n    exportButtonElement.href = urlObj.href;\n};\n\nexport const webserviceItemClickHandler = (webservice) => {\n    webservice.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        const name = webservice.getAttribute('data-name');\n        const description = webservice.getAttribute('data-desc');\n        const curlString = webservice.getAttribute('data-curl');\n\n        if (detailPlaceholderText) {\n            detailPlaceholderText.remove();\n        }\n\n        detailContainerElement.style.display = 'flex';\n\n        detailTitleElement.innerHTML = name;\n        detailDescriptionElement.innerHTML = description;\n        detailRequestElement.innerHTML = curlString;\n\n        document.getElementById('details-curl-button').addEventListener('click', (e) => {\n            e.preventDefault();\n            detailRequestElement.innerHTML = curlString;\n        });\n\n        document.getElementById('details-postman-button').addEventListener('click', (e) => {\n            e.preventDefault();\n            const postman = webservice.getAttribute('data-postman');\n            detailRequestElement.innerHTML = postman;\n        });\n    });\n};\n\nexport const copyRequestClickHandler = () => {\n    const requestString = document.getElementById('ws-curl').innerText;\n\n    // Source: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText#examples.\n    navigator.clipboard.writeText(requestString)\n        .then(() => {\n            // From the official Moodle Component Library:\n            // https://componentlibrary.moodle.com/admin/tool/componentlibrary/docspage.php/moodle/javascript/toast/\n            Toast.add('cURL successfully copied to clipboard', {\n                type: 'success'\n            });\n        })\n        .catch(() => {\n            Toast.add('cURL unable to be copied to clipboard', {\n                type: 'danger'\n            });\n        });\n};"],"names":["detailContainerElement","document","querySelector","detailPlaceholderText","detailTitleElement","getElementById","detailDescriptionElement","detailRequestElement","exportButtonElement","event","url","href","urlObj","URL","target","value","searchParams","set","webservice","addEventListener","e","preventDefault","name","getAttribute","description","curlString","remove","style","display","innerHTML","postman","requestString","innerText","navigator","clipboard","writeText","then","Toast","add","type","catch"],"mappings":"krCAGMA,uBAAyBC,SAASC,cAAc,aAChDC,sBAAwBF,SAASC,cAAc,qBAC/CE,mBAAqBH,SAASI,eAAe,YAC7CC,yBAA2BL,SAASI,eAAe,kBACnDE,qBAAuBN,SAASI,eAAe,WAC/CG,oBAAsBP,SAASI,eAAe,uDAEVI,cAChCC,IAAMF,oBAAoBG,SAC5BC,OAAS,IAAIC,IAAIH,KAGF,SADAD,MAAMK,OAAOC,MAE5BH,OAAOI,aAAaC,IAAI,cAAe,QAEvCL,OAAOI,aAAaC,IAAI,cAAe,WAG3CT,oBAAoBG,KAAOC,OAAOD,0CAGKO,aACvCA,WAAWC,iBAAiB,SAAUC,IAClCA,EAAEC,uBAEIC,KAAOJ,WAAWK,aAAa,aAC/BC,YAAcN,WAAWK,aAAa,aACtCE,WAAaP,WAAWK,aAAa,aAEvCpB,uBACAA,sBAAsBuB,SAG1B1B,uBAAuB2B,MAAMC,QAAU,OAEvCxB,mBAAmByB,UAAYP,KAC/BhB,yBAAyBuB,UAAYL,YACrCjB,qBAAqBsB,UAAYJ,WAEjCxB,SAASI,eAAe,uBAAuBc,iBAAiB,SAAUC,IACtEA,EAAEC,iBACFd,qBAAqBsB,UAAYJ,cAGrCxB,SAASI,eAAe,0BAA0Bc,iBAAiB,SAAUC,IACzEA,EAAEC,uBACIS,QAAUZ,WAAWK,aAAa,gBACxChB,qBAAqBsB,UAAYC,gDAKN,WAC7BC,cAAgB9B,SAASI,eAAe,WAAW2B,UAGzDC,UAAUC,UAAUC,UAAUJ,eACzBK,MAAK,KAGFC,MAAMC,IAAI,wCAAyC,CAC/CC,KAAM,eAGbC,OAAM,KACHH,MAAMC,IAAI,wCAAyC,CAC/CC,KAAM"}